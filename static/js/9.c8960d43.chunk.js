(this.webpackJsonpchat_front=this.webpackJsonpchat_front||[]).push([[9],{210:function(e,t,n){"use strict";var a,c=n(227),o=n.n(c),r=n(216),i={getSocket:function(){return a||(a=o()(r.a.server))},close:function(){a.close()}};t.a=i},211:function(e,t,n){"use strict";var a=n(226),c=n.n(a),o=n(3),r=n(212),i=n(216),s=n(6),u=n(22),l=n(217),d={errConn:{es:"Error de conexi\xf3n",en:"Network error"},getTokenIdError:{es:"Su sesi\xf3n ha expirado",en:"Expired session"}};t.a=function(){var e=Object(r.a)(),t=e.openErrorNotification,n=e.openSuccessNotification,a=Object(o.useRecoilValue)(s.j),f=Object(o.useRecoilValue)(s.f),b=Object(l.a)();return{postRequest:function(e){var o=e.url,r=e.bodyParams,s=void 0===r?{}:r,l=e.doFnAfterSuccess,m=void 0===l?null:l,p=e.doFnAfterError,S=void 0===p?null:p,E=e.messageOnSuccess,g=void 0===E?null:E,O=e.messageOnError,h=void 0===O?null:O,v=function(e){return c.a.post("".concat(i.a.server).concat(o),s,{headers:{Authorization:e}}).then((function(t){return g&&n(g),m&&m(t,e),t})).catch((function(e){return e.response?h&&t(h):t(d.errConn[a]),S&&S(e),e}))};if(f)return v(f).catch((function(e){return console.log("Error al realizar la peticion con el token guardado en recoil state, asi que intentamos usando firebase"),u.a.auth().currentUser.getIdToken(!0).then((function(e){return v(e)})).catch((function(e){return console.log("Error al realizar la peticion con el token proveniente de firebase"),b(),e}))}))}}}},212:function(e,t,n){"use strict";var a=n(9),c=n(20),o=n(3),r=n(72);t.a=function(){var e=Object(o.useRecoilState)(r.a),t=Object(c.a)(e,2),n=t[0],i=t[1],s=Object(a.a)(Object(a.a)({},n),{},{open:!0,autoHideDuration:3e3}),u=function(e,t){i(Object(a.a)(Object(a.a)({},s),{},{severity:e,msg:t}))};return{openNotification:function(e){i(Object(a.a)(Object(a.a)({},s),e))},openSuccessNotification:function(e){u("success",e)},openErrorNotification:function(e){u("error",e)},openInfoNotification:function(e){u("info",e)},openWarningNotification:function(e){u("warning",e)}}}},213:function(e,t,n){"use strict";var a=function(){localStorage.removeItem("denyOSNotification")};t.a={askNotificationPermission:function(e){a();var t=function(t){"permission"in Notification||(Notification.permission=t),e&&e()};"Notification"in window?!function(){try{Notification.requestPermission().then()}catch(e){return!1}return!0}()?Notification.requestPermission((function(e){t(e)})):Notification.requestPermission().then((function(e){t(e)})):console.log("This browser does not support notifications.")},permissionType:function(){return Notification.permission},denyPermission:function(){localStorage.setItem("denyOSNotification",!0)},allowedNotifications:function(){return"granted"===Notification.permission&&!localStorage.getItem("denyOSNotification")}}},214:function(e){e.exports=JSON.parse('{"disconnected":{"es":"se ha desconectado","en":"has disconnected"},"connected":{"es":"se ha conectado","en":"has connected"},"accept":{"es":"es ahora tu contacto","en":"is now your friend"},"decline":{"es":"te ha rechazado","en":"has declined you"},"delete":{"es":"te ha eliminado de sus contactos","en":"has remove you from the list of contacts"},"block":{"es":"te he bloqueado","en":"has bloqued you"},"errorLoadingFriends":{"es":"Error al cargar contactos","en":"Error while loading contacts"},"requestedInv":{"es":"solicita ser su amigo","en":"request be your friend"},"declinedInv":{"es":"ha cancelado la solicitud de amistad","en":"cancel the friend request"},"writingYou":{"es":"ha escrito","en":"has whritten"},"connError":{"es":"Error de conexi\xf3n","en":"Network error"}}')},216:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={server:"https://shut-app-pro.herokuapp.com"}},217:function(e,t,n){"use strict";var a=n(3),c=n(6),o=n(0),r=n(210),i=n(22);t.a=function(){var e=Object(a.useSetRecoilState)(c.k),t=Object(a.useSetRecoilState)(c.n),n=Object(a.useSetRecoilState)(c.c),s=Object(a.useSetRecoilState)(c.h),u=r.a.getSocket(),l=Object(a.useSetRecoilState)(c.o.getAtom);return Object(o.useCallback)((function(){Object(c.e)(),t(null),n([]),s([]),u.emit("logout",{}),r.a.close(),e(null),i.a.auth().signOut(),l(c.o.posibleViews.LOGIN)}),[])}},230:function(e,t){},244:function(e,t,n){"use strict";var a,c,o=n(0),r=n.n(o),i=n(3),s=n(67),u=n(210),l=n(6),d=n(69),f=n(214),b=n(20);"undefined"!==typeof document.hidden?(a="hidden",c="visibilitychange"):"undefined"!==typeof document.msHidden?(a="msHidden",c="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(a="webkitHidden",c="webkitvisibilitychange");var m=function(){var e=Object(o.useState)(!0),t=Object(b.a)(e,2),n=t[0],r=t[1],i=function(){document[a]?r(!1):r(!0)};return Object(o.useEffect)((function(){"undefined"===typeof document.addEventListener||void 0===a?(console.log("Switch to a Google Chrome or Firefox browser, that supports the Page Visibility API."),r(!1)):document.addEventListener(c,i,!1)}),[]),n},p=n(213),S=n(70),E=n.n(S),g=function(e){var t=u.a.getSocket(),n=Object(i.useSetRecoilState)(s.d),a=Object(i.useRecoilValue)(l.k),c=Object(d.b)().enqueueSnackbar,o=m();return{subscribeNewUser:function(){t.on("new user",(function(e){var t={data:e,msg:f.connected};p.a.allowedNotifications()&&!o?t.OSNotification=function(e,t){new Notification(e,{body:t,icon:E.a})}:t.notification=c,n({action:"connect",payload:t})})),a&&t.emit("new user",{userId:a.userId})},unsSubscribeNewUser:function(){t.off("new user")}}},O=function(){var e=Object(i.useSetRecoilState)(s.d),t=u.a.getSocket(),n=Object(d.b)().enqueueSnackbar;return{subscribeDisconnect:function(){t.on("user disconnect",(function(t){e({action:"disconnect",payload:{socketId:t.socketId,notification:n,msg:f.disconnected}})}))},unSubscribeDisconnect:function(){t.off("user disconnect")}}},h=n(9),v=n(212),j=n(211),k=function(e){var t=u.a.getSocket(),n=Object(i.useSetRecoilState)(s.d),a=Object(d.b)().enqueueSnackbar,c=Object(i.useRecoilValue)(l.k),o=Object(i.useRecoilValue)(l.j),r=Object(v.a)().openErrorNotification,b=Object(j.a)().postRequest,S=m();return{subscribeRequestFriend:function(){t.on("requested friendship",(function(e){var t=e.userIdRequester,i=e.userIdRequested,s=e.socketIdRequester;i===c.userId&&b({url:"/users/getFriendById",bodyParams:{friendId:t},doFnAfterSuccess:function(e){if(200===e.status){n({action:"add",payload:{friend:Object(h.a)(Object(h.a)({},e.data.friend),{},{socketId:s})}});var t=e.data.friend;p.a.allowedNotifications()&&!S?new Notification(t.nickname,{body:"".concat(t.nickname," ").concat(f.requestedInv[o]),icon:E.a}):a("".concat(t.nickname," ").concat(f.requestedInv[o]),{variant:"success"})}},doFnAfterError:function(e){e.response?r(f.errorLoadingFriends[o]):r(f.connError[o])}})}))},unSubscribeRequestFriend:function(){t.off("requested friendship")}}},I=function(e){var t=u.a.getSocket(),n=Object(i.useSetRecoilState)(s.d),a=Object(d.b)().enqueueSnackbar,c=Object(i.useRecoilValue)(l.j),o=Object(v.a)().openErrorNotification,r=Object(j.a)().postRequest,b=m();return{subscribeAcceptedFriendship:function(){t.on("accepted friendship",(function(e){var t=e.accepterId,i=e.socketIdAccepter;r({url:"/users/getFriendById",bodyParams:{friendId:t},doFnAfterSuccess:function(e){if(200===e.status){n({action:"update",payload:{friend:Object(h.a)(Object(h.a)({},e.data.friend),{},{socketId:i})}});var t=e.data.friend;p.a.allowedNotifications()&&!b?new Notification(t.nickname,{body:"".concat(t.nickname," ").concat(f.accept[c]),icon:E.a}):a("".concat(t.nickname," ").concat(f.accept[c]),{variant:"success"})}},doFnAfterError:function(e){e.response?o(f.errorLoadingFriends[c]):o(f.connError[c])}})}))},unSubscribeAcceptedFriendship:function(){t.off("accepted friendship")}}},y=function(){var e=u.a.getSocket(),t=Object(i.useSetRecoilState)(s.d),n=Object(d.b)().enqueueSnackbar,a=Object(i.useRecoilValue)(l.j),c=Object(v.a)().openErrorNotification,o=Object(j.a)().postRequest,r=m();return{subscribeDeclinedFriendship:function(){e.on("declined friendship",(function(e){var i=e.declinerId,s=(e.declinedId,e.socketIdDecliner);e.socketIdDeclined;o({url:"/users/getFriendById",bodyParams:{friendId:i},doFnAfterSuccess:function(e){if(200===e.status){t({action:"update",payload:{friend:Object(h.a)(Object(h.a)({},e.data.friend),{},{socketId:s})}});var c=e.data.friend;p.a.allowedNotifications()&&!r?new Notification(c.nickname,{body:"".concat(c.nickname," ").concat(f.declinedInv[a]),icon:E.a}):n("".concat(c.nickname," ").concat(f.declinedInv[a]),{variant:"warning"})}},doFnAfterError:function(e){e.response?404===e.response.status&&t({action:"delete",payload:{friendId:i}}):c(f.connError[a])}})}))},unSubscribeDeclinedFriendship:function(){e.off("declined friendship")}}},R=function(){var e=u.a.getSocket(),t=Object(i.useSetRecoilState)(s.d),n=Object(d.b)().enqueueSnackbar,a=Object(i.useRecoilValue)(l.j),c=Object(v.a)().openErrorNotification,o=Object(j.a)().postRequest,r=m();return{subscribeDeleteContatct:function(){e.on("deleted contact",(function(e){var i=e.deleterId,s=e.socketIdDeleter;o({url:"/users/getFriendById",bodyParams:{friendId:i},doFnAfterSuccess:function(e){if(200===e.status){t({action:"update",payload:{friend:Object(h.a)(Object(h.a)({},e.data.friend),{},{socketId:s})}});var c=e.data.friend;p.a.allowedNotifications()&&!r?new Notification(c.nickname,{body:"".concat(c.nickname," ").concat(f.delete[a]),icon:E.a}):n("".concat(c.nickname," ").concat(f.delete[a]),{variant:"error"})}},doFnAfterError:function(e){e.response?c(f.errorLoadingFriends[a]):c(f.connError[a])}})}))},unSubscribeDeleteContatct:function(){e.off("deleted contact")}}},N=n(71),w=[],C=function(){var e=u.a.getSocket(),t=Object(i.useSetRecoilState)(s.a),n=Object(i.useRecoilValue)(l.k),a=Object(i.useRecoilValue)(l.a),c=Object(d.b)().enqueueSnackbar,S=Object(i.useRecoilState)(s.d),g=Object(b.a)(S,2),O=g[0],h=g[1],v=Object(i.useRecoilValue)(l.j),j=Object(i.useRecoilValue)(l.f),k=m(),I=r.a.useCallback((function(e){w.push(e)}),[]);Object(o.useEffect)((function(){k&&(w.reverse().forEach((function(e){return e()})),w=[])}),[k]),Object(o.useEffect)((function(){return y(),R}),[O,a,k,v]);var y=function(){e.on("recived message",(function(e){var o=e.content,r=e.userOriginId,i=(e.socketIdSender,e.messageId),s=e.datetime;if(O.length>0){var l=O.find((function(e){return e.contactId===r}));if(a!==r){p.a.allowedNotifications()&&!k?new Notification(l.nickname,{body:o,icon:E.a}):c("".concat(l.nickname," ").concat(f.writingYou[v]),{variant:"info"});var d=Object(N.a)({},r,{cantidad:1,lastMessage:o,datetime:s});h({action:"set_message_info",payload:{dataObj:d}})}else{p.a.allowedNotifications()&&!k&&new Notification(l.nickname,{body:o,icon:E.a});var b=Object(N.a)({},r,{cantidad:0,lastMessage:o,datetime:s});h({action:"set_message_info",payload:{dataObj:b}});var m=function(){u.a.getSocket().emit("read messages",{userId:n.userId,contactId:l.contactId,notifyTo:l.socketId,token:j})};k?m():I(m)}t({contactId:r,messageId:i,content:o,datetime:s,state:0})}}))},R=function(){e.off("recived message")};return{subscribeRecibedMessage:y,unSubscribeRecibedMessage:R}},A=function(e){var t=u.a.getSocket(),n=Object(i.useSetRecoilState)(s.c);return{subscribeSavedMessage:function(){t.on("saved message",(function(e){var t=e.contactId,a=e.messageId,c=e.datetime,o=e.consecutive;e.soketIdContact;n({contactId:t,messageId:a,datetime:c,consecutive:o})}))},unSubscribeSavedMessage:function(){t.off("saved message")}}},D=function(e){var t=u.a.getSocket(),n=Object(i.useSetRecoilState)(s.b);return{subscribeReadedMessage:function(){t.on("readed messages",(function(e){var t=e.contactId;n({contactId:t})}))},unSubscribeReadedMessage:function(){t.off("readed messages")}}},F=function(){var e=u.a.getSocket(),t=Object(i.useSetRecoilState)(s.d),n=Object(d.b)().enqueueSnackbar,a=Object(i.useRecoilValue)(l.j),c=Object(v.a)().openErrorNotification,o=Object(j.a)().postRequest,r=m();return{subscribeBlokedContact:function(){e.on("blocked contact",(function(e){var i=e.blokerId,s=e.socketIdBloked;o({url:"/users/getFriendById",bodyParams:{friendId:i},doFnAfterSuccess:function(e){if(200===e.status){t({action:"update",payload:{friend:Object(h.a)(Object(h.a)({},e.data.friend),{},{socketId:s})}});var c=e.data.friend;p.a.allowedNotifications()&&!r?new Notification(c.nickname,{body:"".concat(c.nickname," ").concat(f.block[a]),icon:E.a}):n("".concat(c.nickname," ").concat(f.block[a]),{variant:"error"})}},doFnAfterError:function(e){e.response?c(f.errorLoadingFriends[a]):c(f.connError[a])}})}))},unSubscribeBlokedContact:function(){e.off("bloked contact")}}};t.a=function(e){var t=g(),n=t.subscribeNewUser,a=t.unsSubscribeNewUser,c=O(),o=c.subscribeDisconnect,i=c.unSubscribeDisconnect,s=k(),u=s.subscribeRequestFriend,l=s.unSubscribeRequestFriend,d=I(),f=d.subscribeAcceptedFriendship,b=d.unSubscribeAcceptedFriendship,m=y(),p=m.subscribeDeclinedFriendship,S=m.unSubscribeDeclinedFriendship,E=R(),h=E.subscribeDeleteContatct,v=E.unSubscribeDeleteContatct,j=C(),N=j.subscribeRecibedMessage,w=j.unSubscribeRecibedMessage,q=A(),x=q.subscribeSavedMessage,M=q.unSubscribeSavedMessage,V=D(),z=V.subscribeReadedMessage,P=V.unSubscribeReadedMessage,L=F(),T=L.subscribeBlokedContact,U=L.unSubscribeBlokedContact;return{subscribeAll:r.a.useCallback((function(){n(),o(),u(),f(),p(),h(),N(),x(),z(),T()}),[]),unSubscribeAll:r.a.useCallback((function(){a(),i(),l(),b(),S(),v(),w(),M(),P(),U()}),[])}}},275:function(e){e.exports=JSON.parse('{"acceptInv":{"es":"Aceptar amigo","en":"Accept friend"},"errorAccepting":{"es":"Error al aceptar la solicitud","en":"Error accepting the friend request"}}')},276:function(e){e.exports=JSON.parse('{"block":{"es":"Bloquear contacto","en":"Block contact"},"onBlockError":{"es":"El contacto no se pudo bloquear","en":"Contact could not be block"}}')},305:function(e,t,n){"use strict";var a=n(1),c=n(4),o=n(0),r=(n(2),n(7)),i=n(8),s=n(220),u=o.forwardRef((function(e,t){var n=e.classes,i=e.className,u=Object(c.a)(e,["classes","className"]),l=o.useContext(s.a);return o.createElement("div",Object(a.a)({className:Object(r.a)(n.root,i,"flex-start"===l.alignItems&&n.alignItemsFlexStart),ref:t},u))}));t.a=Object(i.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(u)},306:function(e,t,n){"use strict";var a=n(1),c=n(4),o=n(0),r=(n(2),n(7)),i=n(8),s=o.forwardRef((function(e,t){var n=e.classes,i=e.className,s=Object(c.a)(e,["classes","className"]);return o.createElement("div",Object(a.a)({className:Object(r.a)(n.root,i),ref:t},s))}));s.muiName="ListItemSecondaryAction",t.a=Object(i.a)({root:{position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"}},{name:"MuiListItemSecondaryAction"})(s)},352:function(e){e.exports=JSON.parse('{"REQUESTED":{"es":"Estado: PENDIENTE","en":"State: PENDING"},"ASKED":{"es":"Estado: SOLICITADO","en":"State: REQUESTED"},"DECLINED":{"es":"Estado: RECHAZADO","en":"State: DECLINED"},"BLOCKED":{"es":"Estado: BLOQUEADO","en":"State: BLOCKED"},"DELETED":{"es":"Estado: ELIMINADO","en":"State: DELETED"},"descREQUESTED":{"es":"Estado: Esperando a que acepten su solicitud de amistad","en":"State: Waiting for the acceptance of the friend request"},"descASKED":{"es":"Estado: Este usuario solicita ser su amigo","en":"State: This user wants to be your friend"},"descDECLINED":{"es":"Estado: Su solicitud de amistad ha sido rechazada","en":"State: Your friend request has been declined"},"descBLOCKED":{"es":"Estado: Usted ha sido bloqueado por este contacto","en":"State: You have been bloked by this contact"},"descDELETED":{"es":"Estado: Usted ha sido eliminado por este contacto","en":"State: You have been deleted by this contact"}}')},353:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,a(n(68)).default)(c.default.createElement("g",{fillRule:"evenodd"},c.default.createElement("path",{d:"M9 17l3-2.94c-.39-.04-.68-.06-1-.06-2.67 0-8 1.34-8 4v2h9l-3-3zm2-5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4M15.47 20.5L12 17l1.4-1.41 2.07 2.08 5.13-5.17 1.4 1.41z"})),"HowToReg");t.default=o},354:function(e){e.exports=JSON.parse('{"decline":{"es":"Cancelar peticion","en":"Decline request"},"errorDeclining":{"es":"Error al cancelar solicitud de amistad","en":"Error declining friend request"}}')},355:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,a(n(68)).default)(c.default.createElement("path",{d:"M22 4h-2c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h2V4zM2.17 11.12c-.11.25-.17.52-.17.8V13c0 1.1.9 2 2 2h5.5l-.92 4.65c-.05.22-.02.46.08.66.23.45.52.86.88 1.22L10 22l6.41-6.41c.38-.38.59-.89.59-1.42V6.34C17 5.05 15.95 4 14.66 4h-8.1c-.71 0-1.36.37-1.72.97l-2.67 6.15z"}),"ThumbDownAlt");t.default=o},356:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,a(n(68)).default)(c.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=o},357:function(e){e.exports=JSON.parse('{"delete":{"es":"Eliminar contacto","en":"Delete contact"},"onDeleteError":{"es":"El contacto no se pudo eliminar","en":"Contact could not be removed"}}')},358:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,a(n(68)).default)(c.default.createElement("path",{d:"M12.99 9.18c0-.06.01-.12.01-.18 0-2.21-1.79-4-4-4-.06 0-.12.01-.18.01l4.17 4.17zm-6.1-3.56L4.27 3 3 4.27l2.62 2.62C5.23 7.5 5 8.22 5 9c0 2.21 1.79 4 4 4 .78 0 1.5-.23 2.11-.62L19.73 21 21 19.73l-8.62-8.62-5.49-5.49zM9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"}),"VoiceOverOff");t.default=o},360:function(e,t,n){"use strict";var a=n(57);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=a(n(0)),o=(0,a(n(68)).default)(c.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=o},361:function(e){e.exports=JSON.parse('{"errorLoadingFriends":{"es":"Error al cargar contactos","en":"Error while loading contacts"},"errorLoadingFriendsData":{"es":"Error al cargar datos de contactos","en":"Error while loading contacts data"},"delete":{"es":"Eliminar","en":"Delete"},"beta":{"es":"SHUT-APP V2.2.0 Beta es una aplicaci\xf3n web de chat realizada sin ning\xfan \xe1nimo de lucro. La informaci\xf3n ingresada en esta no ser\xe1 divulgada bajo ning\xfan concepto.","en":"SHUT-APP V2.2.0 Beta is a non-profit chat web application. The information entered will not be disclosed under any circumstances."},"goMakeFriends":{"es":"Agrega a tus amigos o comparte la aplicacion con ellos si no conocen sobre esta.","en":"Add your friends o share the application with them if they don\'t know about it."}}')},428:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(20),r=n(3),i=n(6),s=n(63),u=n(67),l=n(211),d=n(213),f=n(9),b=n(420),m=n(202),p=n(419),S=n(198),E=n(282),g=n(283),O=n(421),h=n(305),v=n(209),j=n(422),k=n(306),I=n(201),y=n(359),R=n(389),N=n(436),w=n(55),C=n(53),A=n(8),D=n(281),F=n.n(D),q=n(360),x=n.n(q),M=n(352),V=n(424),z=n(425),P=n(353),L=n.n(P),T=n(275),U=function(e){var t=e.idioma,n=e.onClick;return c.a.createElement(V.a,{onClick:n},c.a.createElement(z.a,null,c.a.createElement(L.a,{fontSize:"small",color:"primary"})),c.a.createElement(j.a,{primary:T.acceptInv[t]}))},B=n(210),_=function(e){var t=e.preAction,n=e.contact,a=Object(r.useRecoilValue)(i.j),o=Object(r.useRecoilValue)(i.k),s=Object(l.a)().postRequest,d=Object(r.useSetRecoilState)(u.d);return c.a.createElement(U,{idioma:a,onClick:function(){t(),s({url:"/users/acceptFriendRequest",bodyParams:{acceptedUserId:n.contactId},doFnAfterSuccess:function(e,t){d({action:"update",payload:{friend:Object(f.a)(Object(f.a)({},e.data.friend),{},{socketId:n.socketId})}}),B.a.getSocket().emit("accept friendship",{accepterId:o.userId,socketIdRequester:n.socketId,token:t})},messageOnError:T.errorAccepting[a]})}})},H=function(e){return c.a.createElement(_,e)},J=n(354),Y=n(355),G=n.n(Y),K=function(e){var t=e.idioma,n=e.text,a=e.onClick;return c.a.createElement(V.a,{onClick:a},c.a.createElement(z.a,null,c.a.createElement(G.a,{fontSize:"small",color:"error"})),c.a.createElement(j.a,{primary:n.decline[t]}))},Q=function(e){var t=e.preAction,n=e.contact,a=Object(r.useRecoilValue)(i.j),o=Object(r.useSetRecoilState)(u.d),s=Object(r.useRecoilValue)(i.k),d=Object(l.a)().postRequest;return c.a.createElement(K,{idioma:a,onClick:function(){t(),d({url:"/users/declineFriendRequest",bodyParams:{declinedUserId:n.contactId},doFnAfterSuccess:function(e,t){200===e.status&&(o({action:"delete",payload:{friendId:n.contactId}}),B.a.getSocket().emit("decline friendship",{declinerId:s.userId,declinedId:n.contactId,socketIdDeclined:n.socketId,token:t}))},messageOnError:J.errorDeclining[a]})},text:J})},W=function(e){return c.a.createElement(Q,e)},Z=n(356),$=n.n(Z),X=function(e){var t=e.idioma,n=e.onClick,a=e.text;return c.a.createElement(V.a,{onClick:n},c.a.createElement(z.a,null,c.a.createElement($.a,{fontSize:"small",color:"error"})),c.a.createElement(j.a,{primary:a.delete[t]}))},ee=n(357),te=function(e){var t=e.preAction,n=e.contact,a=Object(r.useRecoilValue)(i.j),o=Object(r.useRecoilValue)(i.k),s=Object(l.a)().postRequest,d=Object(r.useSetRecoilState)(u.d);return c.a.createElement(X,{idioma:a,text:ee,onClick:function(){t(),s({url:"/users/deleteContact",bodyParams:{deletedUserId:n.contactId},messageOnError:ee.onDeleteError[a],doFnAfterSuccess:function(e,t){200===e.status&&(d({action:"delete",payload:{friendId:n.contactId}}),1===n.friendShipStatus&&B.a.getSocket().emit("delete contact",{deleterId:o.userId,socketIdDeleted:n.socketId,token:t}))}})}})},ne=function(e){return c.a.createElement(te,e)},ae=n(358),ce=n.n(ae),oe=n(276),re=function(e){var t=e.idioma,n=e.onClick;return c.a.createElement(V.a,{onClick:n},c.a.createElement(z.a,null,c.a.createElement(ce.a,{fontSize:"small",color:"error"})),c.a.createElement(j.a,{primary:oe.block[t]}))},ie=function(e){var t=e.preAction,n=e.contact,a=Object(r.useRecoilValue)(i.j),o=Object(r.useRecoilValue)(i.k),s=Object(l.a)().postRequest,d=Object(r.useSetRecoilState)(u.d);return c.a.createElement(re,{idioma:a,onClick:function(){t(),s({url:"/users/blockUser",bodyParams:{blokedUserId:n.contactId},messageOnError:oe.onBlockError[a],doFnAfterSuccess:function(e,t){200===e.status&&(d({action:"delete",payload:{friendId:n.contactId}}),B.a.getSocket().emit("block contact",{blokerId:o.userId,socketIdBloked:n.socketId,token:t}))}})}})},se=function(e){return c.a.createElement(ie,e)},ue=function(e){var t=e.handleClose,n=e.contact,a=function(){t()};switch(n.friendShipStatus){case 1:return c.a.createElement(c.a.Fragment,null,c.a.createElement(ne,{preAction:a,contact:n}),c.a.createElement(se,{preAction:a,contact:n}));case 2:return c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{preAction:a,contact:n}),c.a.createElement(se,{preAction:a,contact:n}));case 3:return c.a.createElement(c.a.Fragment,null,c.a.createElement(H,{preAction:a,contact:n}),c.a.createElement(W,{preAction:a,contact:n}),c.a.createElement(se,{preAction:a,contact:n}));case 4:return c.a.createElement(c.a.Fragment,null,c.a.createElement(ne,{preAction:a,contact:n}),c.a.createElement(se,{preAction:a,contact:n}));case 5:case 6:return c.a.createElement(ne,{preAction:a,contact:n});default:return null}},le=Object(S.a)((function(e){return{infoIcon:{marginRight:"-12px",overflow:"visible",textAlign:"center",flex:"0 0 auto",color:"rgba(0, 0, 0, 0.54)",padding:"12px",fontSize:"1.5rem",transition:"background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",borderRadius:"50%",border:0,cursor:"pointer",margin:0,display:"inline-flex",outline:0,position:"relative",alignItems:"center",userSelect:"none",verticalAlign:"middle",justifyContent:"center",textDecoration:"none"},listItemText:{paddingRight:e.spacing(10)},primaryText:{color:e.palette.text.primary},secondaryText:{color:e.palette.text.secondary}}})),de=Object(A.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px white","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(y.a),fe=Object(A.a)((function(e){return{badge:{backgroundColor:e.palette.grey[500],color:e.palette.grey[500],boxShadow:"0 0 0 2px white","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(y.a),be=function(e){return e.contact.socketId&&1===e.contact.friendShipStatus?c.a.createElement(de,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},e.children):c.a.createElement(fe,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},e.children)},me=Object(A.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return c.a.createElement(R.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),pe=Object(S.a)((function(e){return{arrow:{color:w.a[500]},tooltip:{backgroundColor:w.a[500]}}})),Se=Object(S.a)((function(e){return{arrow:{color:C.a[500]},tooltip:{backgroundColor:C.a[500]}}})),Ee=function(e){var t=Se(),n=pe();return c.a.createElement(N.a,Object.assign({arrow:!0,classes:"red"===e.color?t:n},e))},ge=c.a.memo((function(e){var t=e.idioma,n=e.contact,a=e.handleMenu,o=e.handleClose,r=e.anchorEl,i=e.openChat,s=n.lastMsg?n.lastMsg:"",u="es"===t?{locale:g.a}:{},l=n.datetime?Object(E.a)(new Date(n.datetime),new Date,u):"",d=le(),f=n.avatarUrl?n.avatarUrl:null;return c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{button:!0,onClick:i},c.a.createElement(h.a,null,c.a.createElement(be,{contact:n},n.unread&&n.unread>0?c.a.createElement(y.a,{color:"secondary",badgeContent:n.unread},c.a.createElement(v.a,{src:f})):c.a.createElement(v.a,{src:f}))),c.a.createElement(j.a,{primary:n.nickname,secondary:n.friendShipStatus>1?M[n.friendShipStatusCode][t]:"".concat(s.slice(0,55),"... ").concat(l),secondaryTypographyProps:n.friendShipStatus>3?{style:{color:"".concat(C.a[500])}}:n.friendShipStatus<4&&n.friendShipStatus>1?{style:{color:"".concat(w.a[500])}}:{},className:d.listItemText,classes:{primary:d.primaryText,secondary:d.secondaryText}}),n.friendShipStatus>1?c.a.createElement(Ee,{title:M["desc".concat(n.friendShipStatusCode)][t],color:n.friendShipStatus>3?"red":"geen"},c.a.createElement("div",{className:d.infoIcon},c.a.createElement(x.a,{id:"idIconInfoFriendStatus",fontSize:"small",style:{color:n.friendShipStatus>3?C.a[500]:w.a[500]}}))):null,c.a.createElement(k.a,null,c.a.createElement(I.a,{edge:"end","aria-label":"delete",onClick:a},c.a.createElement(F.a,{id:"idIconFriendActions",fontSize:"default"})),c.a.createElement(me,{id:"customized-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:o},c.a.createElement(ue,{handleClose:o,contact:n})))),c.a.createElement(p.a,{variant:"inset",component:"li"}))})),Oe=n(22),he=function(e){var t=e.contact,n=Object(a.useState)(null),s=Object(o.a)(n,2),l=s[0],d=s[1],f=Object(r.useRecoilValue)(i.j),b=Object(r.useRecoilValue)(i.k),m=Object(r.useSetRecoilState)(i.a),p=Object(r.useSetRecoilState)(u.d),S=Object(a.useCallback)((function(){d(null)}),[]);return c.a.createElement(ge,{handleMenu:function(e){d(e.currentTarget)},handleClose:S,contact:t,anchorEl:l,idioma:f,openChat:function(){m(t.contactId),p({action:"reset_cant_no_leidos",payload:{contactId:t.contactId}});var e=B.a.getSocket();Oe.a.auth().currentUser.getIdToken(!0).then((function(n){e.emit("read messages",{userId:b.userId,contactId:t.contactId,notifyTo:t.socketId,token:n})})).catch((function(e){return console.log(e)}))}})},ve=function(e){return c.a.createElement(he,e)},je=Object(S.a)((function(e){return{scroll:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",overflowY:"auto",height:"calc(100% - ".concat(e.spacing(8),"px)")},offsetDown:Object(f.a)(Object(f.a)({},e.mixins.toolbar),{},{bottom:0,position:"relative"})}})),ke=function(e){var t=e.idioma,n=e.text,a=e.contacts,o=je();return c.a.createElement("div",{className:o.scroll},c.a.createElement(b.a,{id:"lista"},a.length>0?a.map((function(e){return c.a.createElement(ve,{contact:e,key:e.contactId})})):c.a.createElement("div",{style:{margin:"2em"}},c.a.createElement(p.a,null),c.a.createElement(m.a,{variant:"h5",align:"justify",color:"textPrimary"},n.goMakeFriends[t]),c.a.createElement(p.a,null),c.a.createElement(m.a,{variant:"subtitle1",align:"justify",color:"textPrimary",style:{marginTop:"1em"}},n.beta[t]))),c.a.createElement("div",{className:o.offsetDown}),c.a.createElement("div",{className:o.offsetDown}))},Ie=n(361),ye=n(244),Re=n(217),Ne=n(418),we=c.a.lazy((function(){return n.e(13).then(n.bind(null,433))})),Ce=function(e){var t=Object(r.useRecoilValue)(i.d),n=Object(ye.a)().subscribeAll,f=Object(r.useRecoilState)(i.k),b=Object(o.a)(f,2),m=b[0],p=b[1],S=Object(r.useSetRecoilState)(i.n),E=Object(r.useSetRecoilState)(i.o.getAtom),g=Object(r.useSetRecoilState)(i.l),O=Object(r.useSetRecoilState)(s.b),h=Object(l.a)().postRequest,v=Object(Re.a)(),j=Object(r.useRecoilState)(u.d),k=Object(o.a)(j,2),I=k[0],y=k[1],R=Object(r.useRecoilState)(i.j),N=Object(o.a)(R,2),w=N[0],C=N[1],A=Object(a.useState)(!1),D=Object(o.a)(A,2),F=D[0],q=D[1],x=Object(a.useCallback)((function(){q(!1)}),[]);return Object(a.useEffect)((function(){0===I.length&&null!==m&&function(){h({url:"/users/getUserData",bodyParams:{language:w},doFnAfterSuccess:function(e){if(200===e.status||201===e.status){var t=e.data.user,n=t._id,a=t.nickname,c=t.firstName,o=t.lastName,r=t.email,i=t.language,s=t.avatarUrl,u=t.avatarChanged,l=t.oauthAvatarUrl;u&&(q(!0),g(l)),p({userId:n,nickname:a,firstName:c,lastName:o,email:r}),C(i),S(s)}201===e.status&&d.a.askNotificationPermission((function(){return O(!0)}))},doFnAfterError:function(e){v()}});var e=h({url:"/users/searchFirends"}).then((function(e){200===e.status&&y({action:"initialize",payload:{friends:e.data.friends}})})),t=h({url:"/users/getContactData"});Promise.all([e,t]).then((function(e){var t=Object(o.a)(e,2),n=(t[0],t[1]);200===n.status&&y({action:"set_message_info",payload:{dataObj:n.data.contactsData}})})).then((function(){n()})).catch((function(e){}))}()}),[]),Object(a.useEffect)((function(){null===m&&E(i.o.posibleViews.LOGIN)}),[m]),null!==m&&c.a.createElement(c.a.Fragment,null,c.a.createElement(ke,{idioma:w,contacts:I,text:Ie,isDark:t}),c.a.createElement(Ne.a,{open:F},c.a.createElement(a.Suspense,{fallback:c.a.createElement(c.a.Fragment,null)},c.a.createElement(we,{handleClose:x}))))};t.default=function(e){return c.a.createElement(Ce,null)}}}]);
//# sourceMappingURL=9.c8960d43.chunk.js.map